

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>guppy &mdash; pplacer v1.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pplacer v1.1 documentation" href="index.html" />
    <link rel="next" title="bary" href="generated_rst/guppy_bary.html" />
    <link rel="prev" title="pplacer" href="generated_rst/pplacer.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="generated_rst/guppy_bary.html" title="bary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="generated_rst/pplacer.html" title="pplacer"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pplacer v1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="guppy">
<h1><a class="toc-backref" href="#id1">guppy</a><a class="headerlink" href="#guppy" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Erick Matsen and Aaron Gallagher</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">guppy</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.1</td>
</tr>
<tr class="field"><th class="field-name">License:</th><td class="field-body">GPL v3</td>
</tr>
<tr class="field"><th class="field-name">Date:</th><td class="field-body">March 2011</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">guppy</span></tt> is a tool for working with, visualizing, and comparing collections of phylogenetic placements, such as those made by <a class="reference external" href="http://matsen.fhrcrc.org/pplacer">pplacer</a> or RAxML&#8217;s EPA.
&#8220;GUPPY&#8221; is an acronym: Grand Unified Phylogenetic Placement Yanalyzer.</p>
<div class="contents new topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#guppy" id="id1">guppy</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id3">Usage</a><ul>
<li><a class="reference internal" href="#command-line-interface" id="id4">Command line interface</a></li>
<li><a class="reference internal" href="#batch-mode" id="id5">Batch mode</a></li>
<li><a class="reference internal" href="#about-multiplicities" id="id6">About multiplicities</a></li>
<li><a class="reference internal" href="#phyloxml-viewing-notes" id="id7">phyloXML viewing notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-of-subcommands" id="id8">List of subcommands</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>To use the statistical comparison features of <tt class="docutils literal"><span class="pre">guppy</span></tt>, it&#8217;s a good idea to have a basic understanding of what the Kantorovich-Rubinstein (KR, a.k.a. earth-mover&#8217;s distance) is doing, and how the edge PCA and squash clustering algorithms work.
There is a gentle introduction in <a class="reference external" href="http://matsen.fhcrc.org/papers/11MatsenEvansEdgeSquash.pdf">Matsen and Evans</a>, and a more full treatment in <a class="reference external" href="http://arxiv.org/abs/1005.1699">Evans and Matsen</a>.</p>
<p>Here&#8217;s a table to demonstrate the relation of <tt class="docutils literal"><span class="pre">guppy</span></tt> concepts to ones which may be more familiar to the reader:</p>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">familiar concept</th>
<th class="head">guppy concept</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>weighted UniFrac</td>
<td>Kantorovich-Rubinstein distance (<a class="reference external" href="generated_rst/kr.html">kr</a>)</td>
</tr>
<tr><td>UPGMA using UniFrac</td>
<td>&#8220;squash&#8221; clustering (<a class="reference external" href="generated_rst/squash.html">squash</a>)</td>
</tr>
<tr><td>PCA using UniFrac</td>
<td>Edge PCA (<a class="reference external" href="generated_rst/pca.html">pca</a>)</td>
</tr>
</tbody>
</table>
<p>The heat tree (<a class="reference external" href="generated_rst/heat.html">heat</a>) and barycenter (<a class="reference external" href="generated_rst/bary.html">bary</a>) have no analogs in previous types of phylogenetic microbial analysis.
Note that this table does not show strict equivalences, but rather a list of hints for further exploration.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id3">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">guppy</span></tt> does lots of different things&#8211; it makes heat trees, makes matrices of Kantorovich-Rubinstein distances, does its own version of PCA, etc.
Each of these have their own options.
Rather than make a suite of little programs, we have opted for an interface analogous to git and svn: namely, a collection of different actions wrapped up into a single interface.</p>
<p>There are two ways to access the commands&#8211; through the command line interface, and through the batch mode.
A list of these programs is below, and can always be found using <tt class="docutils literal"><span class="pre">guppy</span> <span class="pre">--cmds</span></tt>.</p>
<div class="section" id="command-line-interface">
<h3><a class="toc-backref" href="#id4">Command line interface</a><a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h3>
<p>The general way to invoke <tt class="docutils literal"><span class="pre">guppy</span></tt> is <tt class="docutils literal"><span class="pre">guppy</span> <span class="pre">COMMAND</span> <span class="pre">[options]</span> <span class="pre">placefile[s]</span></tt> where COMMAND is one of the <tt class="docutils literal"><span class="pre">guppy</span></tt> commands.
For example:</p>
<div class="highlight-python"><pre>guppy heat --gray-black coastal.json DCM.json</pre>
</div>
<p>These programs are listed with more detail below, and can always be found using <tt class="docutils literal"><span class="pre">guppy</span> <span class="pre">--cmds</span></tt> .</p>
</div>
<div class="section" id="batch-mode">
<h3><a class="toc-backref" href="#id5">Batch mode</a><a class="headerlink" href="#batch-mode" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s easy to run lots of commands at once with batch mode.  However, unlike
running the equivalent set of commands on the command line, <em>placefiles are
only loaded once per batch file run</em>. <tt class="docutils literal"><span class="pre">guppy</span></tt> will load a given file the first
time it is used in a command.</p>
<p>Batch files are files with one guppy command per line, specified exactly as
would be written in a shell, except without the leading <tt class="docutils literal"><span class="pre">guppy</span></tt>. Arguments
can be enclosed in double quotes to preserve whitespace, and double quotes
within quoted strings are quoted by doubling (e.g. <tt class="docutils literal"><span class="pre">&quot;spam</span> <span class="pre">&quot;&quot;and&quot;&quot;</span>
<span class="pre">eggs&quot;</span></tt>. Globbing (e.g. <tt class="docutils literal"><span class="pre">*.json</span></tt>) is not allowed. Comments are also allowed
in batch files; everything on a line after a <tt class="docutils literal"><span class="pre">#</span></tt> is ignored.</p>
<p>An example batch file:</p>
<div class="highlight-python"><pre># Whole-line comment.
pca -o pca -c some.refpkg src/a.json src/b.json
squash -c some.refpkg -o squash_out src/a.json src/b.json
classify -c some.refpkg some.json  # inline comment</pre>
</div>
</div>
<div class="section" id="about-multiplicities">
<h3><a class="toc-backref" href="#id6">About multiplicities</a><a class="headerlink" href="#about-multiplicities" title="Permalink to this headline">¶</a></h3>
<p>The new versions of pplacer and guppy support &#8220;multiplicities,&#8221; i.e. multiple reads being treated as one.
For example, if some reads are identical, they can be treated as a group.
Doing so makes guppy operations <em>much</em> faster.</p>
<p>By default, they are used &#8220;as is&#8221; for guppy calculations&#8211; a single placement with multiplicity four is the same as four reads placed individually.
However, if one would like to decrease the impact of multiplicities on downstream analysis (e.g. if PCR artifacts are suspected) one can use the <tt class="docutils literal"><span class="pre">--transform</span></tt> option to choose a transform for the multiplicies before use.</p>
</div>
<div class="section" id="phyloxml-viewing-notes">
<h3><a class="toc-backref" href="#id7">phyloXML viewing notes</a><a class="headerlink" href="#phyloxml-viewing-notes" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">guppy</span></tt> makes fattened and annotated trees to visualize the results of various analyses.
We have chosen to use phyloXML as the format for these trees, as it has width and color tags for edges; if you see .xml files coming out of a guppy analysis that&#8217;s what they are for.
We like looking at these trees using the tree viewer <a class="reference external" href="http://www.phylosoft.org/archaeopteryx/">archaeopteryx</a>.
If you open archaeopteryx with the default settings, you will see <em>nothing interesting</em>, simply the reference tree.
You need to click on the &#8220;Colorize Branches&#8221; and &#8220;Use branch-width&#8221; check boxes.
If you don&#8217;t see those check boxes, then use <a class="reference external" href="http://github.com/fhcrc/microbiome-demo/blob/master/bin/_aptx_configuration_file">this configuration file</a> (if you are going to copy and paste it click on &#8220;raw&#8221; first).</p>
</div>
</div>
<div class="section" id="list-of-subcommands">
<h2><a class="toc-backref" href="#id8">List of subcommands</a><a class="headerlink" href="#list-of-subcommands" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_bary.html">bary</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_bootviz.html">bootviz</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_check_refpkg.html">check_refpkg</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_classify.html">classify</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_demulti.html">demulti</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_distmat.html">distmat</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_fat.html">fat</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_filter.html">filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_heat.html">heat</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_kr.html">kr</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_kr_heat.html">kr_heat</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_merge.html">merge</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_pca.html">pca</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_ref_tree.html">ref_tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_round.html">round</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_sing.html">sing</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_splitify.html">splitify</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_squash.html">squash</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_taxtable.html">taxtable</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_to_json.html">to_json</a></li>
<li class="toctree-l1"><a class="reference internal" href="generated_rst/guppy_tog.html">tog</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">guppy</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#command-line-interface">Command line interface</a></li>
<li><a class="reference internal" href="#batch-mode">Batch mode</a></li>
<li><a class="reference internal" href="#about-multiplicities">About multiplicities</a></li>
<li><a class="reference internal" href="#phyloxml-viewing-notes">phyloXML viewing notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-of-subcommands">List of subcommands</a><ul>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="generated_rst/pplacer.html"
                        title="previous chapter">pplacer</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="generated_rst/guppy_bary.html"
                        title="next chapter">bary</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/guppy.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="generated_rst/guppy_bary.html" title="bary"
             >next</a> |</li>
        <li class="right" >
          <a href="generated_rst/pplacer.html" title="pplacer"
             >previous</a> |</li>
        <li><a href="index.html">pplacer v1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Erick Matsen and Aaron Gallagher.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>